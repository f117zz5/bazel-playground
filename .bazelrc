# Bazel configuration file

# Enable bzlmod - use MODULE.bazel for dependency management
common --enable_bzlmod

# Force C++17 for cpr
build --cxxopt=-std=c++17

# GCC Toolchain Configurations
# Build with GCC 12.3 (default: stable-2024.02-1, glibc 2.39)
build:gcc12 --extra_toolchains=//toolchain:gcc_toolchain

# Build with GCC 10.3 (stable-2021.11-5, glibc 2.34, Ubuntu 20.04-like)
build:gcc10 --extra_toolchains=//toolchain:gcc10_toolchain

# Clang Toolchain Configuration
# Build with Clang 17.0.6 (via toolchains_llvm)
# NOTE: Clang 17 is NOT configured in MODULE.bazel because toolchains_llvm
# restricts its extension to the root module only.  If this repo is used
# as a dependency, having the llvm extension here would fail for consumers.
#
# To use Clang 17 when this repo is the root module, you must add the
# llvm extension setup to MODULE.bazel (see examples/consumer/MODULE.bazel
# for the exact code to paste).
# Then uncomment the line below:
# build:clang17 --extra_toolchains=@llvm_toolchain//:cc-toolchain-x86_64-linux

# -------------------------------------------------------------------
# When used as a DEPENDENCY (consumer references @hermetic_toolchains):
#
#   build:gcc12 --extra_toolchains=@hermetic_toolchains//toolchain:gcc_toolchain
#   build:gcc10 --extra_toolchains=@hermetic_toolchains//toolchain:gcc10_toolchain
#   build:clang17 --extra_toolchains=@llvm_toolchain//:cc-toolchain-x86_64-linux
# -------------------------------------------------------------------